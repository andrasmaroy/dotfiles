#!/usr/bin/env bash

# Change commit author depending on origin url
# Originally from @mmorearty
# http://stackoverflow.com/a/13752961

# "Real" git is the second one returned by 'which'
# REAL_GIT=$(which -a git | sed -n 2p)
if [ -x /usr/local/bin/git ]; then
  REAL_GIT='/usr/local/bin/git'
else
  REAL_GIT='/usr/bin/git'
fi

# Does the remote "origin" point to GitHub?
if ("$REAL_GIT" remote -v 2>/dev/null |
    grep '^origin\b.*github.com:.*(push)$' >/dev/null 2>&1); then

    # Yes.  Set username and email that you use on GitHub.
    export GIT_AUTHOR_NAME='User Name'
    export GIT_AUTHOR_EMAIL='user@example.com'

fi

"$REAL_GIT" "$@"
